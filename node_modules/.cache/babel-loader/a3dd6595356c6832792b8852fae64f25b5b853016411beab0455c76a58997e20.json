{"ast":null,"code":"const PREFIX = \"__njt_\";\nconst storagePolyfill = {\n  async get(key, shared) {\n    const fullKey = PREFIX + (shared ? \"shared:\" : \"private:\") + key;\n    const val = localStorage.getItem(fullKey);\n    if (val === null) throw new Error(\"Key not found: \" + key);\n    return {\n      key,\n      value: val,\n      shared: !!shared\n    };\n  },\n  async set(key, value, shared) {\n    const fullKey = PREFIX + (shared ? \"shared:\" : \"private:\") + key;\n    localStorage.setItem(fullKey, value);\n    return {\n      key,\n      value,\n      shared: !!shared\n    };\n  },\n  async delete(key, shared) {\n    const fullKey = PREFIX + (shared ? \"shared:\" : \"private:\") + key;\n    localStorage.removeItem(fullKey);\n    return {\n      key,\n      deleted: true,\n      shared: !!shared\n    };\n  },\n  async list(prefix, shared) {\n    const scope = PREFIX + (shared ? \"shared:\" : \"private:\");\n    const keys = [];\n    for (let i = 0; i < localStorage.length; i++) {\n      const fullKey = localStorage.key(i);\n      if (fullKey.startsWith(scope)) {\n        const shortKey = fullKey.slice(scope.length);\n        if (!prefix || shortKey.startsWith(prefix)) keys.push(shortKey);\n      }\n    }\n    return {\n      keys,\n      prefix: prefix || undefined,\n      shared: !!shared\n    };\n  }\n};\nif (!window.storage) window.storage = storagePolyfill;\nexport default storagePolyfill;","map":{"version":3,"names":["PREFIX","storagePolyfill","get","key","shared","fullKey","val","localStorage","getItem","Error","value","set","setItem","delete","removeItem","deleted","list","prefix","scope","keys","i","length","startsWith","shortKey","slice","push","undefined","window","storage"],"sources":["/Users/Surenbaatar/Desktop/njt-manager/src/storage-polyfill.js"],"sourcesContent":["const PREFIX = \"__njt_\";\nconst storagePolyfill = {\n  async get(key, shared) {\n    const fullKey = PREFIX + (shared ? \"shared:\" : \"private:\") + key;\n    const val = localStorage.getItem(fullKey);\n    if (val === null) throw new Error(\"Key not found: \" + key);\n    return { key, value: val, shared: !!shared };\n  },\n  async set(key, value, shared) {\n    const fullKey = PREFIX + (shared ? \"shared:\" : \"private:\") + key;\n    localStorage.setItem(fullKey, value);\n    return { key, value, shared: !!shared };\n  },\n  async delete(key, shared) {\n    const fullKey = PREFIX + (shared ? \"shared:\" : \"private:\") + key;\n    localStorage.removeItem(fullKey);\n    return { key, deleted: true, shared: !!shared };\n  },\n  async list(prefix, shared) {\n    const scope = PREFIX + (shared ? \"shared:\" : \"private:\");\n    const keys = [];\n    for (let i = 0; i < localStorage.length; i++) {\n      const fullKey = localStorage.key(i);\n      if (fullKey.startsWith(scope)) {\n        const shortKey = fullKey.slice(scope.length);\n        if (!prefix || shortKey.startsWith(prefix)) keys.push(shortKey);\n      }\n    }\n    return { keys, prefix: prefix || undefined, shared: !!shared };\n  },\n};\nif (!window.storage) window.storage = storagePolyfill;\nexport default storagePolyfill;\n"],"mappings":"AAAA,MAAMA,MAAM,GAAG,QAAQ;AACvB,MAAMC,eAAe,GAAG;EACtB,MAAMC,GAAGA,CAACC,GAAG,EAAEC,MAAM,EAAE;IACrB,MAAMC,OAAO,GAAGL,MAAM,IAAII,MAAM,GAAG,SAAS,GAAG,UAAU,CAAC,GAAGD,GAAG;IAChE,MAAMG,GAAG,GAAGC,YAAY,CAACC,OAAO,CAACH,OAAO,CAAC;IACzC,IAAIC,GAAG,KAAK,IAAI,EAAE,MAAM,IAAIG,KAAK,CAAC,iBAAiB,GAAGN,GAAG,CAAC;IAC1D,OAAO;MAAEA,GAAG;MAAEO,KAAK,EAAEJ,GAAG;MAAEF,MAAM,EAAE,CAAC,CAACA;IAAO,CAAC;EAC9C,CAAC;EACD,MAAMO,GAAGA,CAACR,GAAG,EAAEO,KAAK,EAAEN,MAAM,EAAE;IAC5B,MAAMC,OAAO,GAAGL,MAAM,IAAII,MAAM,GAAG,SAAS,GAAG,UAAU,CAAC,GAAGD,GAAG;IAChEI,YAAY,CAACK,OAAO,CAACP,OAAO,EAAEK,KAAK,CAAC;IACpC,OAAO;MAAEP,GAAG;MAAEO,KAAK;MAAEN,MAAM,EAAE,CAAC,CAACA;IAAO,CAAC;EACzC,CAAC;EACD,MAAMS,MAAMA,CAACV,GAAG,EAAEC,MAAM,EAAE;IACxB,MAAMC,OAAO,GAAGL,MAAM,IAAII,MAAM,GAAG,SAAS,GAAG,UAAU,CAAC,GAAGD,GAAG;IAChEI,YAAY,CAACO,UAAU,CAACT,OAAO,CAAC;IAChC,OAAO;MAAEF,GAAG;MAAEY,OAAO,EAAE,IAAI;MAAEX,MAAM,EAAE,CAAC,CAACA;IAAO,CAAC;EACjD,CAAC;EACD,MAAMY,IAAIA,CAACC,MAAM,EAAEb,MAAM,EAAE;IACzB,MAAMc,KAAK,GAAGlB,MAAM,IAAII,MAAM,GAAG,SAAS,GAAG,UAAU,CAAC;IACxD,MAAMe,IAAI,GAAG,EAAE;IACf,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGb,YAAY,CAACc,MAAM,EAAED,CAAC,EAAE,EAAE;MAC5C,MAAMf,OAAO,GAAGE,YAAY,CAACJ,GAAG,CAACiB,CAAC,CAAC;MACnC,IAAIf,OAAO,CAACiB,UAAU,CAACJ,KAAK,CAAC,EAAE;QAC7B,MAAMK,QAAQ,GAAGlB,OAAO,CAACmB,KAAK,CAACN,KAAK,CAACG,MAAM,CAAC;QAC5C,IAAI,CAACJ,MAAM,IAAIM,QAAQ,CAACD,UAAU,CAACL,MAAM,CAAC,EAAEE,IAAI,CAACM,IAAI,CAACF,QAAQ,CAAC;MACjE;IACF;IACA,OAAO;MAAEJ,IAAI;MAAEF,MAAM,EAAEA,MAAM,IAAIS,SAAS;MAAEtB,MAAM,EAAE,CAAC,CAACA;IAAO,CAAC;EAChE;AACF,CAAC;AACD,IAAI,CAACuB,MAAM,CAACC,OAAO,EAAED,MAAM,CAACC,OAAO,GAAG3B,eAAe;AACrD,eAAeA,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}